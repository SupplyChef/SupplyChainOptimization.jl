<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Locations Optimization · SupplyChainOptimization</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SupplyChainOptimization</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">SupplyChainOptimization.jl</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../optimization flows/">Flow Optimization</a></li><li class="is-active"><a class="tocitem" href>Locations Optimization</a></li><li><a class="tocitem" href="../multi-period optimization/">Multi-period Optimization</a></li><li><a class="tocitem" href="../adding special constraints/">Adding Special Constraints</a></li><li><a class="tocitem" href="../inventory movements/">Inventory Movements</a></li></ul></li><li><span class="tocitem">Internals</span><ul><li><a class="tocitem" href="../optimization model/">Optimization Model</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../reference/">Reference</a></li></ul></li><li><span class="tocitem">Sponsor</span><ul><li><a class="tocitem" href="../sponsor/">Sponsor</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Locations Optimization</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Locations Optimization</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/SupplyChef/SupplyChainOptimization.jl/blob/main/docs/src/optimization locations.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Locations-Optimization"><a class="docs-heading-anchor" href="#Locations-Optimization">Locations Optimization</a><a id="Locations-Optimization-1"></a><a class="docs-heading-anchor-permalink" href="#Locations-Optimization" title="Permalink"></a></h1><p>In this section we will see how to find the best network to service customer demand. We will consider a set of 40 possible storage locations and a set of 350 customers both distributed throughout the US. We specify the cost of operating each storage location and the cost of shipping the product from each storage location to each customer. Finally we indicate the demand for each customer. Once this is done we optimize the network.</p><pre><code class="nohighlight hljs">using CSV
using DataFrames
using SupplyChainOptimization

nm = tempname()
url = &quot;https://raw.githubusercontent.com/plotly/datasets/master/2014_us_cities.csv&quot;
download(url, nm)
us_cities = CSV.read(nm, DataFrame)
rm(nm)

sort!(us_cities, [:pop], rev=true)

sc = SupplyChain(1)

product = Product(&quot;Product 1&quot;)
add_product!(sc, product)

for r in eachrow(first(us_cities, 40))
    storage = Storage(&quot;Storage $(r.name)&quot;, Location(r.lat + 0.2, r.lon + 0.2, r.name); 
            fixed_cost= 2_000_000 + r.pop / 2, 
            opening_cost=0.0, 
            closing_cost=0.0, 
            initial_opened=false)
    add_product!(storage, product; initial_inventory=100_000)
    add_storage!(sc, storage)
end

for (i, r) in enumerate(eachrow(first(us_cities, 350)))
    customer = Customer(&quot;customer $i&quot;, Location(r.lat, r.lon, r.name))
    add_customer!(sc, customer)
    add_demand!(sc, customer, product; demand=[r.pop / 10_000])
end

for c in sc.customers, s in sc.storages
    add_lane!(sc, Lane(s, c; unit_cost=haversine(s.location, c.location) / 250))
end

optimize_network!(sc)</code></pre><p>After optimizing the network we can visualize the results.</p><pre><code class="nohighlight hljs">plot_flows(sc; showlegend=false)</code></pre><p><img src="../assets/getting_started.png" alt="optimized locations"/></p><p>In the next example, we optimize a more complete network: we will consider where to build plants, storage locations to service customers and which suppliers to buy from. The customers consume one type of product which is produced by the plants and stored at the storage locations. The plants need a different product as raw material. This product is sourced from suppliers. </p><p>The process is similar to the previous example: we setup the network using the built-in concepts, call the optimize_network! function and query the results. </p><pre><code class="nohighlight hljs">using CSV
using DataFrames
using SupplyChainOptimization

nm = tempname()
url = &quot;https://raw.githubusercontent.com/plotly/datasets/master/2014_us_cities.csv&quot;
download(url, nm)
us_cities = CSV.read(nm, DataFrame)
rm(nm)

sort!(us_cities, [:pop], rev=true)

sc = SupplyChain(1)

product1 = Product(&quot;Product 1&quot;)
product2 = Product(&quot;Product 2&quot;)
add_product!(sc, product1)
add_product!(sc, product2)

for r in eachrow(first(us_cities, 20))
    supplier = Supplier(&quot;Supplier $(r.name)&quot;, Location(r.lat + 0.2, r.lon - 0.2, r.name))
    add_product!(supplier, product1; unit_cost=1.0)
    add_supplier!(sc, supplier)
end

for r in eachrow(first(us_cities, 20))
    plant = Plant(&quot;Plant $(r.name)&quot;, Location(r.lat - 0.2, r.lon - 0.2, r.name); 
            fixed_cost= 6_000_000 + r.pop / 2, 
            opening_cost=0.0, 
            closing_cost=0.0, 
            initial_opened=false)
    add_product!(plant, product2; bill_of_material=Dict{Product, Float64}(product1 =&gt; 1.0), unit_cost=1.0)
    add_plant!(sc, plant)
end

for r in eachrow(first(us_cities, 20))
    storage = Storage(&quot;Storage $(r.name)&quot;, Location(r.lat + 0.2, r.lon + 0.2, r.name); 
            fixed_cost= 2_000_000 + r.pop / 2, 
            opening_cost=0.0, 
            closing_cost=0.0, 
            initial_opened=false)
    add_product!(storage, product2; initial_inventory=0)
    add_storage!(sc, storage)
end

for (i, r) in enumerate(eachrow(first(us_cities, 350)))
    customer = Customer(&quot;customer $i&quot;, Location(r.lat, r.lon, r.name))
    add_customer!(sc, customer)
    add_demand!(sc, customer, product2; demand=[r.pop / 10_000])
end

for s in sc.suppliers, p in sc.plants
    add_lane!(sc, Lane(s, p; unit_cost=haversine(s.location, p.location) / 750))
end

for p in sc.plants, s in sc.storages
    add_lane!(sc, Lane(p, s; unit_cost=haversine(p.location, s.location) / 750))
end

for c in sc.customers, s in sc.storages
    add_lane!(sc, Lane(s, c; unit_cost=haversine(s.location, c.location) / 250))
end

optimize_network!(sc)</code></pre><p>The network can be visualized (see below). We can see that the optimal network has two clusters of plants/storage locations; one to service the West coast and one to service the East coast. Additionally two smaller storage locations are used as hubs to reduce overall costs.</p><p><img src="../assets/optimizing_locations_network.png" alt="optimized locations"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../optimization flows/">« Flow Optimization</a><a class="docs-footer-nextpage" href="../multi-period optimization/">Multi-period Optimization »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 27 February 2023 19:46">Monday 27 February 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
